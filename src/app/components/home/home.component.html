<div class="home-container">
  <div class="create-new-task-button-container">
    <button mat-flat-button (click)="openDialog()">Create New Task</button>
  </div>
  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
      <mat-expansion-panel-header>
        <mat-panel-title> Self aware panel </mat-panel-title>
        <mat-panel-description> Currently I am {{ panelOpenState() ? 'open' : 'closed' }} </mat-panel-description>
      </mat-expansion-panel-header>
      <p>I'm visible because I am open</p>
    </mat-expansion-panel>
  </mat-accordion>
  <cdk-accordion class="example-accordion">
    @if (items.length === 0) {
      <div class="example-accordion-empty">No items found</div>
    }
    @if (items.length > 0) {
      @for (item of items; track item; let index = $index) {
        <cdk-accordion-item
          #accordionItem="cdkAccordionItem"
          class="example-accordion-item"
          role="button"
          tabIndex="0"
          [attr.id]="'accordion-header-' + index"
          [attr.aria-expanded]="accordionItem.expanded"
          [attr.aria-controls]="'accordion-body-' + index"
        >
          <!-- eslint-disable-next-line @angular-eslint/template/interactive-supports-focus, @angular-eslint/template/click-events-have-key-events -->
          <div class="example-accordion-item-header" (click)="accordionItem.toggle()">
            {{ item.title }}
            <span class="example-accordion-item-description">
              Click to {{ accordionItem.expanded ? 'close' : 'open' }}
            </span>
          </div>
          <div
            class="example-accordion-item-body"
            role="region"
            [style.display]="accordionItem.expanded ? '' : 'none'"
            [attr.id]="'accordion-body-' + index"
            [attr.aria-labelledby]="'accordion-header-' + index"
          >
            <app-todo-item [item]="item"></app-todo-item>
          </div>
        </cdk-accordion-item>
      }
    }
  </cdk-accordion>
</div>
